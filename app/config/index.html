<!DOCTYPE html>
<html lang="en">

<body>
    <form action="/vnc.html" method="GET" class="ui form" id="form">
        <input type="hidden" name="path" id="path" value="vnc">
        <input type="hidden" name="autoconnect" id="autoconnect" value="true">
        <input type="hidden" name="port" id="port" value="80">
        <input type="hidden" name="resize" id="resize" value="remote">
        <input type="hidden" name="host" id="host" value="test">
        <input type="hidden" name="reconnect" id="reconnect" value="true">
        <input type="hidden" name="show_dot" id="show_dot" value="true">
        <input type="hidden" name="bell" id="bell" value="true">
        <input type="hidden" name="view_only" id="view_only" value="false">
    </form>
    <script>
        window.addEventListener("load", () => {
            updateConfig()
            document.getElementById("form").submit();
        })

        function updateConfig() {
            var url = document.location.host + document.location.pathname;
            var host = document.getElementById("host");
            var form = document.getElementById("form");
            form.action = document.location.pathname == "" ? "/vnc.html" : document.location.pathname + "vnc.html";
            host.value = url;
        }
    </script>
</body>

</html>
